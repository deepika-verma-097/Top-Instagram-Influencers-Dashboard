<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1920,initial-scale=1">
<title>Instagram Influencer Analytics ‚Äì Live Dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root{
  --ig-blue:#405DE6;--ig-purple:#833AB4;--ig-pink:#E1306C;--ig-orange:#F77737;--ig-yellow:#FCAF45;
  --grad:linear-gradient(135deg,#405DE6,#833AB4,#E1306C,#F77737,#FCAF45);
  --dark:#08080e;--card:#0f0f1a;--card2:#141420;--border:rgba(255,255,255,0.07);
  --text:#f0f0f5;--muted:#6e6e8e;--glass:rgba(255,255,255,0.03);
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100vw;height:100vh;overflow:hidden;background:var(--dark);color:var(--text);font-family:'DM Sans',sans-serif;font-size:11px;}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:
    radial-gradient(ellipse 55% 50% at 5% 0%,rgba(64,93,230,.2) 0%,transparent 55%),
    radial-gradient(ellipse 50% 50% at 95% 95%,rgba(225,48,108,.18) 0%,transparent 55%),
    radial-gradient(ellipse 35% 35% at 50% 50%,rgba(131,58,180,.1) 0%,transparent 65%);}

/* MASTER SHELL - strict 100vh no scroll */
.shell{position:relative;z-index:1;width:100vw;height:100vh;display:grid;
  grid-template-rows:40px 68px 1fr 1fr;gap:5px;padding:6px 8px;}

/* HEADER */
header{display:flex;align-items:center;justify-content:space-between;gap:10px;}
.logo-area{display:flex;align-items:center;gap:9px;}
.logo-ring{width:38px;height:38px;border-radius:12px;background:var(--grad);display:flex;align-items:center;justify-content:center;box-shadow:0 0 22px rgba(225,48,108,.6);animation:igpulse 3s ease-in-out infinite;flex-shrink:0;padding:5px;}
.logo-ring svg{width:100%;height:100%;display:block;}
@keyframes igpulse{0%,100%{box-shadow:0 0 14px rgba(225,48,108,.45),0 0 0 2px rgba(225,48,108,.2);}50%{box-shadow:0 0 36px rgba(225,48,108,.9),0 0 0 3px rgba(252,175,69,.4);}}
.logo-text h1{font-family:'Syne',sans-serif;font-size:13px;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.logo-text p{font-size:8px;color:var(--muted);letter-spacing:.04em;}
.hdr-right{display:flex;gap:7px;align-items:center;}
.badge{padding:3px 9px;border-radius:99px;border:1px solid var(--border);background:var(--glass);font-size:9px;color:var(--muted);}
.live-dot{display:inline-block;width:5px;height:5px;border-radius:50%;background:#4ade80;box-shadow:0 0 6px #4ade80;animation:blink 1.5s ease-in-out infinite;margin-right:4px;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.2;}}
.clbl{font-size:8.5px;color:var(--muted);}
select{background:var(--card2);border:1px solid var(--border);color:var(--text);padding:3px 7px;border-radius:7px;font-family:inherit;font-size:9px;cursor:pointer;outline:none;}
input[type=range]{accent-color:var(--ig-pink);width:65px;cursor:pointer;vertical-align:middle;}
.ig-search{background:var(--card2);border:1px solid var(--border);color:var(--text);padding:3px 8px;border-radius:7px;font-family:inherit;font-size:9px;outline:none;width:140px;}
.ig-search::placeholder{color:var(--muted);}

/* KPI ROW */
.kpi-row{display:grid;grid-template-columns:repeat(5,1fr);gap:5px;}
.kpi-card{background:var(--card);border:1px solid var(--border);border-radius:9px;padding:7px 10px;position:relative;overflow:hidden;display:flex;align-items:center;gap:8px;}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;border-radius:9px 9px 0 0;}
.k1::before{background:linear-gradient(90deg,#405DE6,#833AB4);}
.k2::before{background:linear-gradient(90deg,#833AB4,#E1306C);}
.k3::before{background:linear-gradient(90deg,#E1306C,#F77737);}
.k4::before{background:linear-gradient(90deg,#F77737,#FCAF45);}
.k5::before{background:linear-gradient(90deg,#405DE6,#FCAF45);}
.kpi-icon{font-size:16px;flex-shrink:0;}
.kpi-label{font-size:8px;color:var(--muted);text-transform:uppercase;letter-spacing:.04em;}
.kpi-value{font-family:'Syne',sans-serif;font-size:16px;font-weight:800;line-height:1.1;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.kpi-sub{font-size:7.5px;color:#4ade80;margin-top:1px;}

/* CHART ROWS: 4 cols each */
.chart-row{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;min-height:0;}

/* CARD */
.card{background:var(--card);border:1px solid var(--border);border-radius:9px;padding:7px 9px;
  display:flex;flex-direction:column;position:relative;overflow:hidden;transition:border-color .2s;min-height:0;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--grad);border-radius:9px 9px 0 0;opacity:.55;}
.card:hover{border-color:rgba(225,48,108,.28);}
.card-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:5px;flex-shrink:0;}
.card-title{font-family:'Syne',sans-serif;font-size:9.5px;font-weight:700;}
.card-sub{font-size:7.5px;color:var(--muted);margin-top:1px;}
.tag{padding:1px 6px;border-radius:99px;font-size:7.5px;border:1px solid var(--border);color:var(--muted);white-space:nowrap;}

/* CANVAS fills card */
.canvas-wrap{flex:1;position:relative;min-height:0;}
.canvas-wrap canvas{position:absolute;inset:0;width:100%!important;height:100%!important;}

/* TABLE */
.filter-row{display:flex;gap:4px;margin-bottom:4px;flex-shrink:0;align-items:center;}
.filter-row select,.filter-row .ig-search{font-size:8.5px;padding:2px 6px;}
.filter-row .ig-search{flex:1;}
.tbl-wrap{flex:1;overflow-y:auto;overflow-x:hidden;min-height:0;}
.tbl-wrap::-webkit-scrollbar{width:2px;}
.tbl-wrap::-webkit-scrollbar-thumb{background:rgba(225,48,108,.35);border-radius:99px;}
table{width:100%;border-collapse:collapse;}
th{font-size:7.5px;letter-spacing:.04em;text-transform:uppercase;color:var(--muted);padding:3px 5px;text-align:left;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--card);cursor:pointer;user-select:none;white-space:nowrap;}
th:hover{color:var(--text);}
td{padding:2.5px 5px;font-size:9px;border-bottom:1px solid rgba(255,255,255,.03);vertical-align:middle;white-space:nowrap;}
tr:hover td{background:var(--glass);}
.rank-badge{width:16px;height:16px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-size:7.5px;font-weight:700;}
.score-bar{height:2px;border-radius:99px;background:linear-gradient(90deg,var(--ig-blue),var(--ig-purple),var(--ig-pink));margin-top:2px;}

/* TREND BUTTONS */
.trend-row{display:flex;gap:3px;flex-wrap:wrap;margin-bottom:4px;flex-shrink:0;}
.trend-btn{padding:2px 6px;border-radius:99px;border:1px solid var(--border);background:var(--glass);color:var(--muted);font-size:8px;cursor:pointer;font-family:inherit;transition:all .15s;}
.trend-btn.active{background:linear-gradient(135deg,var(--ig-purple),var(--ig-pink));border-color:transparent;color:#fff;}

/* BUBBLE */
.bubble-area{flex:1;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:3px;padding:3px;min-height:0;}
.bubble{border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s;flex-shrink:0;}
.bubble:hover{transform:scale(1.12);z-index:10;}
.bubble .b-name{font-size:6.5px;font-weight:600;color:#fff;text-align:center;line-height:1.1;pointer-events:none;}
.bubble .b-val{font-size:6px;color:rgba(255,255,255,.75);pointer-events:none;}

/* HEATMAP */
.hm-grid{display:grid;gap:2px;flex:1;min-height:0;}
.hm-cell{border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:6.5px;font-weight:600;cursor:pointer;transition:transform .12s;}
.hm-cell:hover{transform:scale(1.18);z-index:10;}
.hm-label{font-size:6.5px;color:var(--muted);display:flex;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

/* MAP */
.map-wrap{display:grid;grid-template-columns:repeat(auto-fill,minmax(54px,1fr));gap:3px;flex:1;min-height:0;overflow:hidden;}
.mc{background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:3px 2px;text-align:center;cursor:pointer;transition:transform .15s,border-color .15s;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.mc:hover{transform:scale(1.08);border-color:rgba(225,48,108,.5);}
.mc .mbar{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(135deg,#405DE6,#E1306C);opacity:.2;border-radius:0 0 6px 6px;transition:opacity .2s;}
.mc:hover .mbar{opacity:.42;}
.mc .mflag{font-size:12px;}
.mc .mname{font-size:6px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;}
.mc .mval{font-family:'Syne',sans-serif;font-size:8.5px;font-weight:700;}
.mc .mcnt{font-size:6px;color:var(--muted);}

/* TOOLTIP */
#tooltip{position:fixed;background:rgba(10,10,20,.97);border:1px solid rgba(225,48,108,.3);border-radius:9px;padding:8px 11px;font-size:10px;pointer-events:none;z-index:9999;display:none;backdrop-filter:blur(20px);max-width:190px;}
#tooltip .tt-title{font-family:'Syne',sans-serif;font-size:10px;font-weight:700;margin-bottom:4px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
#tooltip .tt-row{display:flex;justify-content:space-between;gap:10px;color:var(--muted);margin-top:2px;font-size:9px;}
#tooltip .tt-row span{color:var(--text);font-weight:500;}

::-webkit-scrollbar{width:2px;height:2px;}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:99px;}
</style>
</head>
<body>
<div id="tooltip"></div>
<div class="shell">

  <!-- HEADER -->
  <header>
    <div class="logo-area">
      <div class="logo-ring">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="20" height="20" rx="5.5" stroke="white" stroke-width="2"/>
          <circle cx="12" cy="12" r="4.5" stroke="white" stroke-width="2"/>
          <circle cx="17.5" cy="6.5" r="1.2" fill="white"/>
        </svg>
      </div>
      <div class="logo-text">
        <h1>Instagram Influencer Analytics Dashboard</h1>
        <p>Top 200 Instagram Creators ¬∑ Live &amp; Interactive ¬∑ 32 Countries ¬∑ Real Data</p>
      </div>
    </div>
    <div class="hdr-right">
      <!-- Instagram Icon Image (SVG inline, official style) -->
      <div style="display:flex;align-items:center;gap:7px;padding:4px 12px 4px 7px;border-radius:99px;border:1px solid rgba(225,48,108,.4);background:rgba(225,48,108,.08);">
        <div style="width:26px;height:26px;border-radius:8px;padding:4px;flex-shrink:0;background:linear-gradient(135deg,#405DE6,#5851DB,#833AB4,#C13584,#E1306C,#F77737,#FCAF45);box-shadow:0 0 14px rgba(225,48,108,.6);animation:igpulse 3s ease-in-out infinite;">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;display:block;">
            <rect x="2" y="2" width="20" height="20" rx="6" stroke="white" stroke-width="2.2"/>
            <circle cx="12" cy="12" r="4.5" stroke="white" stroke-width="2.2"/>
            <circle cx="17.5" cy="6.5" r="1.3" fill="white"/>
          </svg>
        </div>
        <span style="font-family:'Syne',sans-serif;font-size:11px;font-weight:800;letter-spacing:-.01em;background:linear-gradient(90deg,#E1306C,#F77737,#FCAF45);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Instagram</span>
      </div>
      <div class="badge"><span class="live-dot"></span>Live Data ¬∑ 200 Creators</div>
      <span class="clbl">Country:</span>
      <select id="globalCountry"><option value="all">üåç All Countries</option></select>
      <span class="clbl">Top N:</span>
      <input type="range" id="topN" min="5" max="30" value="10" step="5">
      <span id="topNVal" style="font-size:9px;color:var(--ig-pink);font-family:'Syne',sans-serif;font-weight:700;min-width:16px">10</span>
      <input class="ig-search" id="gSearch" placeholder="üîç Search handle or country‚Ä¶" oninput="state.tableFilter=this.value.toLowerCase();renderTable();">
    </div>
  </header>

  <!-- KPI ROW -->
  <div class="kpi-row">
    <div class="kpi-card k1"><div class="kpi-icon">üë•</div><div><div class="kpi-label">Total Instagram Followers</div><div class="kpi-value" id="kTotal">‚Äî</div><div class="kpi-sub" id="kTotalSub">‚Äî</div></div></div>
    <div class="kpi-card k2"><div class="kpi-icon">üí´</div><div><div class="kpi-label">Avg Engagement Rate</div><div class="kpi-value" id="kEng">‚Äî</div><div class="kpi-sub" id="kEngSub">Instagram avg</div></div></div>
    <div class="kpi-card k3"><div class="kpi-icon">‚ù§Ô∏è</div><div><div class="kpi-label">Total Instagram Likes</div><div class="kpi-value" id="kLikes">‚Äî</div><div class="kpi-sub" id="kLikesSub">cumulative</div></div></div>
    <div class="kpi-card k4"><div class="kpi-icon">üèÜ</div><div><div class="kpi-label">Avg Influence Score</div><div class="kpi-value" id="kScore">‚Äî</div><div class="kpi-sub" id="kScoreSub">out of 100</div></div></div>
    <div class="kpi-card k5"><div class="kpi-icon">üåç</div><div><div class="kpi-label">Instagram Countries</div><div class="kpi-value" id="kCountries">‚Äî</div><div class="kpi-sub" id="kCountriesSub">represented</div></div></div>
  </div>

  <!-- CHART ROW 1: Bar | Table | Scatter | Growth -->
  <div class="chart-row">
    <div class="card">
      <div class="card-head"><div><div class="card-title">Top Influencers by Score</div><div class="card-sub">Ranked Instagram creators</div></div><div class="tag">Bar</div></div>
      <div class="canvas-wrap"><canvas id="barChart"></canvas></div>
    </div>
    <div class="card">
      <div class="card-head"><div><div class="card-title">Instagram Creator Rankings</div><div class="card-sub">Click headers to sort</div></div><div class="tag">Table</div></div>
      <div class="filter-row">
        <input class="ig-search" id="tableSearch" placeholder="üîç Search‚Ä¶">
        <select id="tableCountry"><option value="all">All</option></select>
      </div>
      <div class="tbl-wrap"><table id="rankTable"></table></div>
    </div>
    <div class="card">
      <div class="card-head"><div><div class="card-title">Followers vs Avg Likes</div><div class="card-sub">Bubble = Influence Score</div></div><div class="tag">Scatter</div></div>
      <div class="canvas-wrap"><canvas id="scatterChart"></canvas></div>
    </div>
    <div class="card">
      <div class="card-head"><div><div class="card-title">Instagram Growth Rate</div><div class="card-sub">Green = growing ¬∑ Pink = declining</div></div><div class="tag">Growth</div></div>
      <div class="canvas-wrap"><canvas id="growthChart"></canvas></div>
    </div>
  </div>

  <!-- CHART ROW 2: Line | Country Bar | Heatmap | Trendline+Map -->
  <div class="chart-row">
    <div class="card">
      <div class="card-head"><div><div class="card-title">Post Avg Likes ‚Äì Trend</div><div class="card-sub">Toggle Instagram creators</div></div><div class="tag">Line</div></div>
      <div class="trend-row" id="trendControls"></div>
      <div class="canvas-wrap"><canvas id="lineChart"></canvas></div>
    </div>
    <div class="card">
      <div class="card-head"><div><div class="card-title">Creators &amp; Score by Country</div><div class="card-sub">Top 14 Instagram countries</div></div><div class="tag">Country</div></div>
      <div class="canvas-wrap"><canvas id="countryBar"></canvas></div>
    </div>
    <div class="card">
      <div class="card-head"><div><div class="card-title">60-Day Engagement Heatmap</div><div class="card-sub">Creator √ó Country</div></div><div class="tag">Heatmap</div></div>
      <div id="heatmapWrap" style="flex:1;display:flex;flex-direction:column;min-height:0;"></div>
    </div>
    <div class="card" style="gap:4px;">
      <div class="card-head" style="margin-bottom:2px;"><div><div class="card-title">Score Band Trendline</div><div class="card-sub">90+ vs 80‚Äì89 vs &lt;80</div></div><div class="tag">Trend</div></div>
      <div class="canvas-wrap" style="flex:1;"><canvas id="trendChart"></canvas></div>
      <div style="border-top:1px solid var(--border);padding-top:4px;margin-top:2px;flex-shrink:0;">
        <div style="display:flex;align-items:center;gap:5px;margin-bottom:3px;">
          <span style="font-family:'Syne',sans-serif;font-size:8.5px;font-weight:700;">Instagram World Map</span>
          <span class="tag">Geo</span>
          <span style="font-size:7px;color:var(--muted);">¬∑ avg engagement by country</span>
        </div>
        <div class="map-wrap" id="mapGrid"></div>
      </div>
    </div>
  </div>

</div><!-- /shell -->
<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê REAL DATA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const RAW = [{"rank":1,"name":"cristiano","score":92,"followers":475.8,"avg_likes":8.7,"eng_rate":1.8285,"growth_rate":-25.2874,"total_likes_m":29000.0,"country":"Spain","eng60":0.0139,"new_post_avg_like":6.5},{"rank":2,"name":"kyliejenner","score":91,"followers":366.2,"avg_likes":8.3,"eng_rate":2.2665,"growth_rate":-28.9157,"total_likes_m":57400.0,"country":"United States","eng60":0.0162,"new_post_avg_like":5.9},{"rank":3,"name":"leomessi","score":90,"followers":357.3,"avg_likes":6.8,"eng_rate":1.9032,"growth_rate":-35.2941,"total_likes_m":6000.0,"country":"United States","eng60":0.0124,"new_post_avg_like":4.4},{"rank":4,"name":"selenagomez","score":93,"followers":342.7,"avg_likes":6.2,"eng_rate":1.8092,"growth_rate":-46.7742,"total_likes_m":11500.0,"country":"United States","eng60":0.0097,"new_post_avg_like":3.3},{"rank":5,"name":"therock","score":91,"followers":334.1,"avg_likes":1.9,"eng_rate":0.5687,"growth_rate":-64.9842,"total_likes_m":12500.0,"country":"United States","eng60":0.002,"new_post_avg_like":0.6653},{"rank":6,"name":"kimkardashian","score":91,"followers":329.2,"avg_likes":3.5,"eng_rate":1.0632,"growth_rate":-17.1429,"total_likes_m":19900.0,"country":"United States","eng60":0.0088,"new_post_avg_like":2.9},{"rank":7,"name":"arianagrande","score":92,"followers":327.7,"avg_likes":3.7,"eng_rate":1.1291,"growth_rate":5.4054,"total_likes_m":18400.0,"country":"United States","eng60":0.012,"new_post_avg_like":3.9},{"rank":8,"name":"beyonce","score":92,"followers":272.8,"avg_likes":3.6,"eng_rate":1.3196,"growth_rate":-44.4444,"total_likes_m":7400.0,"country":"United States","eng60":0.0076,"new_post_avg_like":2.0},{"rank":9,"name":"khloekardashian","score":89,"followers":268.3,"avg_likes":2.4,"eng_rate":0.8945,"growth_rate":-61.3792,"total_likes_m":9800.0,"country":"United States","eng60":0.0035,"new_post_avg_like":0.9269},{"rank":10,"name":"justinbieber","score":91,"followers":254.5,"avg_likes":1.9,"eng_rate":0.7466,"growth_rate":-21.0526,"total_likes_m":13900.0,"country":"Canada","eng60":0.0059,"new_post_avg_like":1.5},{"rank":11,"name":"kendalljenner","score":90,"followers":254.0,"avg_likes":5.5,"eng_rate":2.1654,"growth_rate":-7.2727,"total_likes_m":3700.0,"country":"United States","eng60":0.0204,"new_post_avg_like":5.1},{"rank":12,"name":"natgeo","score":91,"followers":237.0,"avg_likes":0.3022,"eng_rate":0.1275,"growth_rate":-47.2866,"total_likes_m":3000.0,"country":"United States","eng60":0.0007,"new_post_avg_like":0.1593},{"rank":13,"name":"nike","score":90,"followers":234.1,"avg_likes":0.329,"eng_rate":0.1405,"growth_rate":-44.7416,"total_likes_m":313.6,"country":"United States","eng60":0.0008,"new_post_avg_like":0.1818},{"rank":14,"name":"taylorswift","score":91,"followers":222.2,"avg_likes":2.4,"eng_rate":1.0801,"growth_rate":-4.1667,"total_likes_m":1300.0,"country":"United States","eng60":0.0101,"new_post_avg_like":2.3},{"rank":15,"name":"jlo","score":89,"followers":220.4,"avg_likes":1.7,"eng_rate":0.7713,"growth_rate":-17.6471,"total_likes_m":5300.0,"country":"United States","eng60":0.0062,"new_post_avg_like":1.4},{"rank":16,"name":"virat.kohli","score":87,"followers":211.8,"avg_likes":3.5,"eng_rate":1.6525,"growth_rate":-42.8571,"total_likes_m":4900.0,"country":"India","eng60":0.0096,"new_post_avg_like":2.0},{"rank":17,"name":"nickiminaj","score":90,"followers":201.6,"avg_likes":2.1,"eng_rate":1.0417,"growth_rate":-52.381,"total_likes_m":13500.0,"country":"United States","eng60":0.0053,"new_post_avg_like":1.0},{"rank":18,"name":"kourtneykardash","score":89,"followers":195.2,"avg_likes":1.8,"eng_rate":0.9221,"growth_rate":-27.7778,"total_likes_m":7700.0,"country":"United States","eng60":0.0067,"new_post_avg_like":1.3},{"rank":19,"name":"mileycyrus","score":89,"followers":181.5,"avg_likes":1.3,"eng_rate":0.7163,"growth_rate":-29.7231,"total_likes_m":1600.0,"country":"United States","eng60":0.0051,"new_post_avg_like":0.9136},{"rank":20,"name":"neymarjr","score":90,"followers":177.1,"avg_likes":2.7,"eng_rate":1.5246,"growth_rate":-29.6296,"total_likes_m":14100.0,"country":"Brazil","eng60":0.0109,"new_post_avg_like":1.9},{"rank":21,"name":"katyperry","score":92,"followers":170.3,"avg_likes":0.715,"eng_rate":0.4198,"growth_rate":-62.9231,"total_likes_m":1500.0,"country":"United States","eng60":0.0016,"new_post_avg_like":0.2651},{"rank":22,"name":"kevinhart4real","score":88,"followers":152.0,"avg_likes":0.522,"eng_rate":0.3434,"growth_rate":-77.931,"total_likes_m":4300.0,"country":"United States","eng60":0.0008,"new_post_avg_like":0.1152},{"rank":23,"name":"zendaya","score":87,"followers":150.7,"avg_likes":5.8,"eng_rate":3.8487,"growth_rate":-17.2414,"total_likes_m":20600.0,"country":"United States","eng60":0.0317,"new_post_avg_like":4.8},{"rank":24,"name":"iamcardib","score":75,"followers":140.5,"avg_likes":3.1,"eng_rate":2.2064,"growth_rate":-51.6129,"total_likes_m":5000.0,"country":"United States","eng60":0.011,"new_post_avg_like":1.5},{"rank":25,"name":"ddlovato","score":88,"followers":139.1,"avg_likes":1.1,"eng_rate":0.7908,"growth_rate":-66.9636,"total_likes_m":91.3,"country":"United States","eng60":0.0027,"new_post_avg_like":0.3634},{"rank":26,"name":"badgalriri","score":88,"followers":135.3,"avg_likes":3.7,"eng_rate":2.7347,"growth_rate":-100.0,"total_likes_m":17900.0,"country":"United States","eng60":0.0002,"new_post_avg_like":0.0},{"rank":27,"name":"kingjames","score":86,"followers":130.9,"avg_likes":2.1,"eng_rate":1.6043,"growth_rate":-42.8571,"total_likes_m":4900.0,"country":"England","eng60":0.0092,"new_post_avg_like":1.2},{"rank":28,"name":"theellenshow","score":87,"followers":125.1,"avg_likes":0.4205,"eng_rate":0.3361,"growth_rate":-80.5707,"total_likes_m":4200.0,"country":"United States","eng60":0.0007,"new_post_avg_like":0.0817},{"rank":29,"name":"realmadrid","score":90,"followers":123.4,"avg_likes":0.9962,"eng_rate":0.8073,"growth_rate":-40.9456,"total_likes_m":6800.0,"country":"Spain","eng60":0.0048,"new_post_avg_like":0.5883},{"rank":30,"name":"champagnepapi","score":85,"followers":119.6,"avg_likes":1.7,"eng_rate":1.4214,"growth_rate":-23.5294,"total_likes_m":9000.0,"country":"Netherlands","eng60":0.011,"new_post_avg_like":1.3},{"rank":31,"name":"chrisbrownofficial","score":86,"followers":118.5,"avg_likes":0.4632,"eng_rate":0.3909,"growth_rate":-44.7539,"total_likes_m":3400.0,"country":"United States","eng60":0.0022,"new_post_avg_like":0.2559},{"rank":32,"name":"fcbarcelona","score":90,"followers":111.4,"avg_likes":1.2,"eng_rate":1.0772,"growth_rate":-41.1417,"total_likes_m":11600.0,"country":"United States","eng60":0.0064,"new_post_avg_like":0.7063},{"rank":33,"name":"billieeilish","score":73,"followers":105.2,"avg_likes":8.5,"eng_rate":8.0798,"growth_rate":-38.8235,"total_likes_m":5900.0,"country":"United States","eng60":0.0502,"new_post_avg_like":5.2},{"rank":34,"name":"dualipa","score":74,"followers":85.9,"avg_likes":2.1,"eng_rate":2.4447,"growth_rate":-47.619,"total_likes_m":2600.0,"country":"United Kingdom","eng60":0.0126,"new_post_avg_like":1.1},{"rank":35,"name":"gal_gadot","score":85,"followers":85.6,"avg_likes":1.4,"eng_rate":1.6355,"growth_rate":-58.1071,"total_likes_m":2300.0,"country":"United States","eng60":0.0069,"new_post_avg_like":0.5865},{"rank":36,"name":"vindiesel","score":88,"followers":82.3,"avg_likes":1.4,"eng_rate":1.7011,"growth_rate":-65.55,"total_likes_m":2500.0,"country":"United States","eng60":0.006,"new_post_avg_like":0.4823},{"rank":37,"name":"nasa","score":88,"followers":81.3,"avg_likes":1.2,"eng_rate":1.476,"growth_rate":0.0,"total_likes_m":4200.0,"country":"United States","eng60":0.0153,"new_post_avg_like":1.2},{"rank":38,"name":"priyankachopra","score":85,"followers":81.1,"avg_likes":1.6,"eng_rate":1.9729,"growth_rate":-49.8188,"total_likes_m":5600.0,"country":"United States","eng60":0.01,"new_post_avg_like":0.8029},{"rank":39,"name":"lalalalisa_m","score":70,"followers":80.9,"avg_likes":5.8,"eng_rate":7.1693,"growth_rate":24.1379,"total_likes_m":5100.0,"country":"South Korea","eng60":0.09,"new_post_avg_like":7.2},{"rank":40,"name":"Shakira","score":88,"followers":76.1,"avg_likes":0.9751,"eng_rate":1.2813,"growth_rate":-68.7519,"total_likes_m":1900.0,"country":"Colombia","eng60":0.0041,"new_post_avg_like":0.3047},{"rank":41,"name":"snoopdogg","score":86,"followers":75.3,"avg_likes":0.2037,"eng_rate":0.2705,"growth_rate":-38.2425,"total_likes_m":2000.0,"country":"United States","eng60":0.0017,"new_post_avg_like":0.1258},{"rank":42,"name":"gigihadid","score":85,"followers":75.3,"avg_likes":2.5,"eng_rate":3.3201,"growth_rate":-24.0,"total_likes_m":8200.0,"country":"United States","eng60":0.0256,"new_post_avg_like":1.9},{"rank":43,"name":"davidbeckham","score":86,"followers":74.9,"avg_likes":1.2,"eng_rate":1.6021,"growth_rate":-71.5917,"total_likes_m":1900.0,"country":"United States","eng60":0.0046,"new_post_avg_like":0.3409},{"rank":44,"name":"shraddhakapoor","score":81,"followers":73.9,"avg_likes":1.6,"eng_rate":2.1651,"growth_rate":-46.2563,"total_likes_m":3000.0,"country":"India","eng60":0.0117,"new_post_avg_like":0.8599},{"rank":45,"name":"victoriassecret","score":88,"followers":73.2,"avg_likes":0.147,"eng_rate":0.2008,"growth_rate":-79.7279,"total_likes_m":423.5,"country":"United States","eng60":0.0004,"new_post_avg_like":0.0298},{"rank":46,"name":"k.mbappe","score":86,"followers":72.7,"avg_likes":2.5,"eng_rate":3.4388,"growth_rate":-36.0,"total_likes_m":2800.0,"country":"Spain","eng60":0.0216,"new_post_avg_like":1.6},{"rank":47,"name":"nehakakkar","score":84,"followers":70.4,"avg_likes":1.5,"eng_rate":2.1307,"growth_rate":-75.3267,"total_likes_m":3500.0,"country":"India","eng60":0.0054,"new_post_avg_like":0.3701},{"rank":48,"name":"nba","score":87,"followers":70.1,"avg_likes":0.3708,"eng_rate":0.529,"growth_rate":-46.8986,"total_likes_m":4800.0,"country":"United States","eng60":0.0028,"new_post_avg_like":0.1969},{"rank":49,"name":"shawnmendes","score":83,"followers":69.9,"avg_likes":3.5,"eng_rate":5.0072,"growth_rate":-42.8571,"total_likes_m":8800.0,"country":"Canada","eng60":0.0287,"new_post_avg_like":2.0},{"rank":50,"name":"jennierubyjane","score":76,"followers":68.9,"avg_likes":5.1,"eng_rate":7.402,"growth_rate":11.7647,"total_likes_m":4400.0,"country":"South Korea","eng60":0.0836,"new_post_avg_like":5.7},{"rank":51,"name":"narendramodi","score":85,"followers":68.9,"avg_likes":2.9,"eng_rate":4.209,"growth_rate":-31.0345,"total_likes_m":1600.0,"country":"India","eng60":0.0301,"new_post_avg_like":2.0},{"rank":52,"name":"aliaabhatt","score":82,"followers":68.7,"avg_likes":1.8,"eng_rate":2.6201,"growth_rate":16.6667,"total_likes_m":3300.0,"country":"India","eng60":0.0314,"new_post_avg_like":2.1},{"rank":53,"name":"deepikapadukone","score":83,"followers":68.4,"avg_likes":1.6,"eng_rate":2.3392,"growth_rate":-6.25,"total_likes_m":419.0,"country":"India","eng60":0.0223,"new_post_avg_like":1.5},{"rank":54,"name":"tomholland2013","score":77,"followers":67.7,"avg_likes":5.4,"eng_rate":7.9764,"growth_rate":35.1852,"total_likes_m":6600.0,"country":"United Kingdom","eng60":0.1083,"new_post_avg_like":7.3},{"rank":55,"name":"ronaldinho","score":78,"followers":67.7,"avg_likes":0.8729,"eng_rate":1.2894,"growth_rate":-62.6876,"total_likes_m":2600.0,"country":"Brazil","eng60":0.0049,"new_post_avg_like":0.3257},{"rank":56,"name":"emmawatson","score":87,"followers":67.3,"avg_likes":1.9,"eng_rate":2.8232,"growth_rate":-100.0,"total_likes_m":639.0,"country":"United States","eng60":0.0001,"new_post_avg_like":0.0},{"rank":57,"name":"bts.bighitofficial","score":78,"followers":66.9,"avg_likes":4.1,"eng_rate":6.1286,"growth_rate":-12.1951,"total_likes_m":4900.0,"country":"Uruguay","eng60":0.054,"new_post_avg_like":3.6},{"rank":58,"name":"katrinakaif","score":85,"followers":66.3,"avg_likes":1.7,"eng_rate":2.5641,"growth_rate":-11.7647,"total_likes_m":1700.0,"country":"India","eng60":0.0225,"new_post_avg_like":1.5},{"rank":59,"name":"marvel","score":82,"followers":66.2,"avg_likes":0.3323,"eng_rate":0.502,"growth_rate":2.0163,"total_likes_m":2300.0,"country":"Turkey","eng60":0.0051,"new_post_avg_like":0.339},{"rank":60,"name":"justintimberlake","score":87,"followers":65.9,"avg_likes":0.6004,"eng_rate":0.9111,"growth_rate":-68.4544,"total_likes_m":470.7,"country":"United States","eng60":0.003,"new_post_avg_like":0.1894},{"rank":61,"name":"camila_cabello","score":77,"followers":65.0,"avg_likes":1.9,"eng_rate":2.9231,"growth_rate":-26.3158,"total_likes_m":5400.0,"country":"United States","eng60":0.0219,"new_post_avg_like":1.4},{"rank":62,"name":"willsmith","score":82,"followers":63.9,"avg_likes":1.4,"eng_rate":2.1909,"growth_rate":-100.0,"total_likes_m":1900.0,"country":"United States","eng60":0.0002,"new_post_avg_like":0.0},{"rank":63,"name":"raffinagita1717","score":83,"followers":63.5,"avg_likes":0.3869,"eng_rate":0.6093,"growth_rate":-5.2468,"total_likes_m":6800.0,"country":"Indonesia","eng60":0.0058,"new_post_avg_like":0.3666},{"rank":64,"name":"anitta","score":82,"followers":63.1,"avg_likes":0.8555,"eng_rate":1.3558,"growth_rate":-50.1812,"total_likes_m":4400.0,"country":"United States","eng60":0.0069,"new_post_avg_like":0.4262},{"rank":65,"name":"sooyaaa__","score":82,"followers":62.9,"avg_likes":4.5,"eng_rate":7.1542,"growth_rate":31.1111,"total_likes_m":3800.0,"country":"South Korea","eng60":0.0943,"new_post_avg_like":5.9},{"rank":66,"name":"maluma","score":84,"followers":62.8,"avg_likes":1.2,"eng_rate":1.9108,"growth_rate":-41.975,"total_likes_m":9800.0,"country":"Colombia","eng60":0.0112,"new_post_avg_like":0.6963},{"rank":67,"name":"akshaykumar","score":85,"followers":62.8,"avg_likes":1.5,"eng_rate":2.3885,"growth_rate":-58.34,"total_likes_m":2900.0,"country":"India","eng60":0.0101,"new_post_avg_like":0.6249},{"rank":68,"name":"jacquelinef143","score":85,"followers":62.7,"avg_likes":1.1,"eng_rate":1.7544,"growth_rate":-34.6545,"total_likes_m":2800.0,"country":"India","eng60":0.0115,"new_post_avg_like":0.7188},{"rank":69,"name":"psg","score":86,"followers":61.9,"avg_likes":0.5005,"eng_rate":0.8086,"growth_rate":-35.6244,"total_likes_m":5000.0,"country":"France","eng60":0.0052,"new_post_avg_like":0.3222},{"rank":70,"name":"roses_are_rosie","score":82,"followers":61.8,"avg_likes":4.6,"eng_rate":7.4434,"growth_rate":30.4348,"total_likes_m":3800.0,"country":"South Korea","eng60":0.0972,"new_post_avg_like":6.0},{"rank":71,"name":"manchesterunited","score":85,"followers":59.6,"avg_likes":0.3818,"eng_rate":0.6406,"growth_rate":-36.7208,"total_likes_m":3800.0,"country":"United Kingdom","eng60":0.0041,"new_post_avg_like":0.2416},{"rank":72,"name":"anushkasharma","score":85,"followers":59.5,"avg_likes":1.9,"eng_rate":3.1933,"growth_rate":-26.3158,"total_likes_m":2200.0,"country":"India","eng60":0.0234,"new_post_avg_like":1.4},{"rank":73,"name":"whinderssonnunes","score":79,"followers":58.7,"avg_likes":1.6,"eng_rate":2.7257,"growth_rate":-79.8063,"total_likes_m":4400.0,"country":"Brazil","eng60":0.0058,"new_post_avg_like":0.3231},{"rank":74,"name":"9gag","score":86,"followers":58.1,"avg_likes":0.6726,"eng_rate":1.1577,"growth_rate":-63.039,"total_likes_m":6700.0,"country":"United States","eng60":0.0044,"new_post_avg_like":0.2486},{"rank":75,"name":"marcelotwelve","score":86,"followers":58.1,"avg_likes":0.6909,"eng_rate":1.1892,"growth_rate":-35.1136,"total_likes_m":1900.0,"country":"Brazil","eng60":0.0078,"new_post_avg_like":0.4483},{"rank":76,"name":"milliebobbybrown","score":80,"followers":57.6,"avg_likes":4.0,"eng_rate":6.9444,"growth_rate":25.0,"total_likes_m":1100.0,"country":"United States","eng60":0.0863,"new_post_avg_like":5.0},{"rank":77,"name":"karimbenzema","score":42,"followers":56.9,"avg_likes":0.8785,"eng_rate":1.5439,"growth_rate":4.5987,"total_likes_m":1800.0,"country":"Spain","eng60":0.0162,"new_post_avg_like":0.9189},{"rank":78,"name":"chrishemsworth","score":86,"followers":55.9,"avg_likes":2.8,"eng_rate":5.0089,"growth_rate":-25.0,"total_likes_m":2500.0,"country":"Australia","eng60":0.0369,"new_post_avg_like":2.1},{"rank":79,"name":"karolg","score":83,"followers":55.6,"avg_likes":3.1,"eng_rate":5.5755,"growth_rate":83.871,"total_likes_m":10100.0,"country":"India","eng60":0.1025,"new_post_avg_like":5.7},{"rank":80,"name":"paulpogba","score":80,"followers":55.2,"avg_likes":1.4,"eng_rate":2.5362,"growth_rate":-66.9571,"total_likes_m":1800.0,"country":"France","eng60":0.0085,"new_post_avg_like":0.4626},{"rank":81,"name":"iamzlatanibrahimovic","score":86,"followers":55.1,"avg_likes":1.5,"eng_rate":2.7223,"growth_rate":-44.1933,"total_likes_m":1300.0,"country":"Sweden","eng60":0.0153,"new_post_avg_like":0.8371},{"rank":82,"name":"leonardodicaprio","score":86,"followers":54.6,"avg_likes":0.3955,"eng_rate":0.7244,"growth_rate":-72.7939,"total_likes_m":669.3,"country":"United States","eng60":0.002,"new_post_avg_like":0.1076},{"rank":83,"name":"juventus","score":87,"followers":54.5,"avg_likes":0.1948,"eng_rate":0.3574,"growth_rate":-30.4415,"total_likes_m":1900.0,"country":"Italy","eng60":0.0025,"new_post_avg_like":0.1355},{"rank":84,"name":"zacefron","score":86,"followers":54.5,"avg_likes":2.3,"eng_rate":4.2202,"growth_rate":91.3043,"total_likes_m":1500.0,"country":"United States","eng60":0.0818,"new_post_avg_like":4.4},{"rank":85,"name":"bellahadid","score":79,"followers":54.1,"avg_likes":1.1,"eng_rate":2.0333,"growth_rate":0.0,"total_likes_m":3600.0,"country":"United Kingdom","eng60":0.0206,"new_post_avg_like":1.1},{"rank":86,"name":"tatawerneck","score":86,"followers":53.9,"avg_likes":0.9598,"eng_rate":1.7807,"growth_rate":-72.2338,"total_likes_m":5400.0,"country":"Brazil","eng60":0.0051,"new_post_avg_like":0.2665},{"rank":87,"name":"beingsalmankhan","score":76,"followers":53.5,"avg_likes":1.4,"eng_rate":2.6168,"growth_rate":-50.4357,"total_likes_m":1600.0,"country":"India","eng60":0.0133,"new_post_avg_like":0.6939},{"rank":88,"name":"robertdowneyjr","score":86,"followers":53.4,"avg_likes":3.0,"eng_rate":5.618,"growth_rate":-63.3333,"total_likes_m":1300.0,"country":"United States","eng60":0.0205,"new_post_avg_like":1.1},{"rank":89,"name":"sunnyleone","score":84,"followers":53.4,"avg_likes":0.764,"eng_rate":1.4307,"growth_rate":-60.5628,"total_likes_m":3500.0,"country":"India","eng60":0.0057,"new_post_avg_like":0.3013},{"rank":90,"name":"ladygaga","score":83,"followers":53.2,"avg_likes":1.4,"eng_rate":2.6316,"growth_rate":-62.0286,"total_likes_m":5100.0,"country":"United States","eng60":0.0102,"new_post_avg_like":0.5316},{"rank":91,"name":"dishapatani","score":74,"followers":53.0,"avg_likes":1.6,"eng_rate":3.0189,"growth_rate":-39.2688,"total_likes_m":3400.0,"country":"United States","eng60":0.0185,"new_post_avg_like":0.9717},{"rank":92,"name":"sergioramos","score":87,"followers":52.8,"avg_likes":1.1,"eng_rate":2.0833,"growth_rate":-49.2818,"total_likes_m":2500.0,"country":"Spain","eng60":0.0106,"new_post_avg_like":0.5579},{"rank":93,"name":"jbalvin","score":87,"followers":52.8,"avg_likes":0.878,"eng_rate":1.6629,"growth_rate":-61.2187,"total_likes_m":8800.0,"country":"Colambia","eng60":0.0066,"new_post_avg_like":0.3405},{"rank":94,"name":"mosalah","score":22,"followers":52.5,"avg_likes":1.8,"eng_rate":3.4286,"growth_rate":-38.8889,"total_likes_m":1500.0,"country":"Egypt","eng60":0.0218,"new_post_avg_like":1.1},{"rank":95,"name":"ayutingting92","score":85,"followers":52.4,"avg_likes":0.1473,"eng_rate":0.2811,"growth_rate":-61.7787,"total_likes_m":1500.0,"country":"Indonesia","eng60":0.0011,"new_post_avg_like":0.0563},{"rank":96,"name":"433","score":79,"followers":51.2,"avg_likes":0.8632,"eng_rate":1.6859,"growth_rate":-10.3105,"total_likes_m":8900.0,"country":"Netherlands","eng60":0.0152,"new_post_avg_like":0.7742},{"rank":97,"name":"hudabeauty","score":82,"followers":50.8,"avg_likes":0.1864,"eng_rate":0.3669,"growth_rate":-90.9871,"total_likes_m":453.6,"country":"United States","eng60":0.0004,"new_post_avg_like":0.0168},{"rank":98,"name":"adele","score":84,"followers":50.7,"avg_likes":4.7,"eng_rate":9.2702,"growth_rate":-59.5745,"total_likes_m":2000.0,"country":"United States","eng60":0.0382,"new_post_avg_like":1.9},{"rank":99,"name":"michelleobama","score":85,"followers":50.7,"avg_likes":0.7005,"eng_rate":1.3817,"growth_rate":-12.748,"total_likes_m":421.7,"country":"United States","eng60":0.0122,"new_post_avg_like":0.6112},{"rank":100,"name":"kritisanon","score":76,"followers":50.2,"avg_likes":0.8972,"eng_rate":1.7873,"growth_rate":-32.6349,"total_likes_m":2400.0,"country":"India","eng60":0.0121,"new_post_avg_like":0.6044},{"rank":103,"name":"thv","score":83,"followers":49.3,"avg_likes":15.4,"eng_rate":31.2373,"growth_rate":-18.1818,"total_likes_m":987.4,"country":"South Korea","eng60":0.258,"new_post_avg_like":12.6},{"rank":110,"name":"blackpinkofficial","score":85,"followers":48.2,"avg_likes":2.1,"eng_rate":4.3568,"growth_rate":-38.0952,"total_likes_m":3000.0,"country":"South Korea","eng60":0.0277,"new_post_avg_like":1.3},{"rank":115,"name":"harrystyles","score":57,"followers":46.9,"avg_likes":4.7,"eng_rate":10.0213,"growth_rate":-38.2979,"total_likes_m":2800.0,"country":"United States","eng60":0.0638,"new_post_avg_like":2.9},{"rank":119,"name":"zayn","score":82,"followers":46.5,"avg_likes":4.7,"eng_rate":10.1075,"growth_rate":-14.8936,"total_likes_m":773.5,"country":"United States","eng60":0.0881,"new_post_avg_like":4.0},{"rank":139,"name":"badbunnypr","score":83,"followers":42.1,"avg_likes":3.7,"eng_rate":8.7886,"growth_rate":45.9459,"total_likes_m":67.5,"country":"Los Angeles","eng60":0.1309,"new_post_avg_like":5.4},{"rank":141,"name":"j.m","score":83,"followers":41.9,"avg_likes":14.2,"eng_rate":33.8902,"growth_rate":-22.5352,"total_likes_m":368.1,"country":"South Korea","eng60":0.2641,"new_post_avg_like":11.0},{"rank":157,"name":"georginagio","score":74,"followers":39.1,"avg_likes":2.2,"eng_rate":5.6266,"growth_rate":50.0,"total_likes_m":1600.0,"country":"Saudi Arabia","eng60":0.0856,"new_post_avg_like":3.3},{"rank":168,"name":"rkive","score":83,"followers":37.0,"avg_likes":10.9,"eng_rate":29.4595,"growth_rate":-100.0,"total_likes_m":1200.0,"country":"India","eng60":0.0,"new_post_avg_like":0.0},{"rank":192,"name":"danbilzerian","score":84,"followers":33.6,"avg_likes":2.0,"eng_rate":5.9524,"growth_rate":-40.0,"total_likes_m":2800.0,"country":"Canada","eng60":0.0358,"new_post_avg_like":1.2}];

const COUNTRIES_DATA = [{"country":"United States","count":84,"avg_score":84.4,"avg_eng":2.585,"total_followers":8677.5,"avg_likes":1.96,"total_likes_m":393010.7},{"country":"India","count":25,"avg_score":81.5,"avg_eng":3.863,"total_followers":1447.5,"avg_likes":1.92,"total_likes_m":60651.2},{"country":"Brazil","count":15,"avg_score":78.3,"avg_eng":1.339,"total_followers":808.0,"avg_likes":0.77,"total_likes_m":44969.3},{"country":"Indonesia","count":10,"avg_score":81.6,"avg_eng":0.609,"total_followers":435.0,"avg_likes":0.27,"total_likes_m":16919.2},{"country":"South Korea","count":7,"avg_score":80.1,"avg_eng":14.093,"total_followers":413.9,"avg_likes":7.39,"total_likes_m":21455.5},{"country":"Spain","count":7,"avg_score":81.0,"avg_eng":1.497,"total_followers":864.8,"avg_likes":2.07,"total_likes_m":43981.2},{"country":"France","count":7,"avg_score":76.9,"avg_eng":1.613,"total_followers":310.5,"avg_likes":0.67,"total_likes_m":11334.3},{"country":"United Kingdom","count":5,"avg_score":78.0,"avg_eng":2.793,"total_followers":307.2,"avg_likes":1.87,"total_likes_m":20100.0},{"country":"Italy","count":4,"avg_score":85.8,"avg_eng":1.183,"total_followers":188.3,"avg_likes":0.57,"total_likes_m":6700.0},{"country":"Canada","count":4,"avg_score":85.2,"avg_eng":3.589,"total_followers":399.5,"avg_likes":2.12,"total_likes_m":26267.0},{"country":"Colombia","count":4,"avg_score":84.8,"avg_eng":1.719,"total_followers":232.2,"avg_likes":0.99,"total_likes_m":17000.0},{"country":"Turkey","count":3,"avg_score":80.7,"avg_eng":1.271,"total_followers":147.3,"avg_likes":0.55,"total_likes_m":5300.0},{"country":"Germany","count":3,"avg_score":81.7,"avg_eng":0.935,"total_followers":102.6,"avg_likes":0.32,"total_likes_m":2782.5},{"country":"Netherlands","count":2,"avg_score":82.0,"avg_eng":1.554,"total_followers":170.8,"avg_likes":1.28,"total_likes_m":17900.0},{"country":"Sweden","count":2,"avg_score":84.5,"avg_eng":1.476,"total_followers":93.6,"avg_likes":0.79,"total_likes_m":1944.1},{"country":"Mexico","count":2,"avg_score":73.0,"avg_eng":5.823,"total_followers":70.2,"avg_likes":2.05,"total_likes_m":4400.0},{"country":"Australia","count":1,"avg_score":86.0,"avg_eng":5.009,"total_followers":55.9,"avg_likes":2.8,"total_likes_m":2500.0},{"country":"Russia","count":1,"avg_score":63.0,"avg_eng":2.045,"total_followers":33.5,"avg_likes":0.69,"total_likes_m":3100.0},{"country":"Saudi Arabia","count":1,"avg_score":74.0,"avg_eng":5.627,"total_followers":39.1,"avg_likes":2.2,"total_likes_m":1600.0},{"country":"Egypt","count":1,"avg_score":22.0,"avg_eng":3.429,"total_followers":52.5,"avg_likes":1.8,"total_likes_m":1500.0},{"country":"Canada","count":4,"avg_score":85.2,"avg_eng":3.589,"total_followers":399.5,"avg_likes":2.12,"total_likes_m":26267.0},{"country":"England","count":1,"avg_score":86.0,"avg_eng":1.604,"total_followers":130.9,"avg_likes":2.1,"total_likes_m":4900.0}];

const COUNTRY_FLAGS = {"United States":"üá∫üá∏","India":"üáÆüá≥","Brazil":"üáßüá∑","Indonesia":"üáÆüá©","South Korea":"üá∞üá∑","Spain":"üá™üá∏","France":"üá´üá∑","United Kingdom":"üá¨üáß","Italy":"üáÆüáπ","Canada":"üá®üá¶","Colombia":"üá®üá¥","Turkey":"üáπüá∑","Germany":"üá©üá™","Netherlands":"üá≥üá±","Sweden":"üá∏üá™","Mexico":"üá≤üáΩ","Australia":"üá¶üá∫","Russia":"üá∑üá∫","Saudi Arabia":"üá∏üá¶","Egypt":"üá™üá¨","England":"üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø","Uruguay":"üá∫üáæ","Wales":"üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø","Switzerland":"üá®üá≠","United Arab Emirates":"üá¶üá™","Argentina":"üá¶üá∑","Portugal":"üáµüáπ","Japan":"üáØüáµ"};

// Chart.js defaults
Chart.defaults.color='#7c7c99';
Chart.defaults.borderColor='rgba(255,255,255,0.06)';
Chart.defaults.font.family="'DM Sans',sans-serif";

// Palette
const PALETTE=['#405DE6','#833AB4','#E1306C','#F77737','#FCAF45','#C13584','#5851DB','#E1306C','#833AB4','#405DE6','#FCAF45','#F77737'];

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let state={country:'all',topN:10,sortCol:'rank',sortDir:1,tableFilter:'',tableCountry:'all'};
let charts={bar:null,scatter:null,line:null,countryBar:null,trend:null,growth:null};

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
function init(){
  // Populate country selects
  const countries=[...new Set(RAW.map(r=>r.country))].sort();
  ['globalCountry','tableCountry'].forEach(id=>{
    const sel=document.getElementById(id);
    countries.forEach(c=>{
      const o=document.createElement('option');
      o.value=c; o.textContent=(COUNTRY_FLAGS[c]||'üåê')+' '+c;
      sel.appendChild(o);
    });
  });

  document.getElementById('globalCountry').addEventListener('change',e=>{
    state.country=e.target.value;
    updateAll();
  });
  document.getElementById('topN').addEventListener('input',e=>{
    state.topN=+e.target.value;
    document.getElementById('topNVal').textContent=state.topN;
    updateBarChart(); updateGrowthChart();
  });
  document.getElementById('tableSearch').addEventListener('input',e=>{
    state.tableFilter=e.target.value.toLowerCase();
    renderTable();
  });
  document.getElementById('tableCountry').addEventListener('change',e=>{
    state.tableCountry=e.target.value;
    renderTable();
  });

  buildLineControls();
  updateAll();
  buildHeatmap();
  buildMapGrid();
  buildBubbles();
}

function filtered(){
  if(state.country==='all') return RAW;
  return RAW.filter(r=>r.country===state.country);
}

function updateAll(){
  const data=filtered();
  updateKPIs(data);
  updateBarChart();
  renderTable();
  updateScatter(data);
  updateCountryBar();
  updateTrendChart(data);
  updateGrowthChart();
}

// ‚îÄ‚îÄ KPIs ‚îÄ‚îÄ
function fmt(n){
  if(n>=1e9) return (n/1e9).toFixed(1)+'B';
  if(n>=1e6) return (n/1e6).toFixed(1)+'M';
  if(n>=1e3) return (n/1e3).toFixed(1)+'K';
  return n.toFixed(1);
}
function updateKPIs(data){
  const totalF=data.reduce((a,r)=>a+r.followers,0);
  const avgE=data.reduce((a,r)=>a+r.eng_rate,0)/data.length;
  const totalL=data.reduce((a,r)=>a+r.total_likes_m,0);
  const avgS=data.reduce((a,r)=>a+r.score,0)/data.length;
  const uniqueC=new Set(data.map(r=>r.country)).size;
  document.getElementById('kTotal').textContent=fmt(totalF*1e6);
  document.getElementById('kEng').textContent=avgE.toFixed(2)+'%';
  document.getElementById('kLikes').textContent=fmt(totalL*1e6);
  document.getElementById('kScore').textContent=avgS.toFixed(1);
  document.getElementById('kCountries').textContent=uniqueC;
  document.getElementById('kTotalSub').textContent=data.length+' influencers';
}

// ‚îÄ‚îÄ BAR CHART ‚îÄ‚îÄ
function updateBarChart(){
  const data=filtered().slice(0,state.topN);
  const labels=data.map(r=>'@'+r.name);
  const scores=data.map(r=>r.score);
  const ctx=document.getElementById('barChart').getContext('2d');
  const grad=ctx.createLinearGradient(0,0,0,400);
  grad.addColorStop(0,'rgba(225,48,108,0.95)');
  grad.addColorStop(1,'rgba(64,93,230,0.95)');
  if(charts.bar) charts.bar.destroy();
  charts.bar=new Chart(ctx,{
    type:'bar',
    data:{labels,datasets:[{data:scores,backgroundColor:grad,borderRadius:7,borderSkipped:false}]},
    options:{
      indexAxis:'y',responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{label:c=>' Score: '+c.raw+' | Followers: '+c.chart.data.datasets[0].data[c.dataIndex]}}
      },
      scales:{
        x:{grid:{color:'rgba(255,255,255,0.05)'},min:0,max:100},
        y:{grid:{display:false},ticks:{font:{size:10}}}
      }
    }
  });
}

// ‚îÄ‚îÄ TABLE ‚îÄ‚îÄ
let tableSortCol='rank',tableSortDir=1;
function renderTable(){
  let data=filtered();
  if(state.tableFilter) data=data.filter(r=>r.name.toLowerCase().includes(state.tableFilter)||r.country.toLowerCase().includes(state.tableFilter));
  if(state.tableCountry!=='all') data=data.filter(r=>r.country===state.tableCountry);
  data=[...data].sort((a,b)=>{
    const va=a[tableSortCol],vb=b[tableSortCol];
    return typeof va==='string'?va.localeCompare(vb)*tableSortDir:(va-vb)*tableSortDir;
  });
  const cols=[
    {key:'rank',label:'#'},
    {key:'name',label:'Influencer'},
    {key:'country',label:'Country'},
    {key:'followers',label:'Followers (M)'},
    {key:'avg_likes',label:'Avg Likes (M)'},
    {key:'eng_rate',label:'Eng Rate %'},
    {key:'score',label:'Score'},
    {key:'growth_rate',label:'Growth %'},
  ];
  const t=document.getElementById('rankTable');
  t.innerHTML='<thead><tr>'+cols.map(c=>`<th onclick="sortTable('${c.key}')">${c.label}<span class="sort-arrow">${tableSortCol===c.key?(tableSortDir===1?'‚Üë':'‚Üì'):'‚Üï'}</span></th>`).join('')+'</tr></thead>';
  const colors=['#405DE6','#833AB4','#E1306C','#F77737','#FCAF45'];
  const tbody=document.createElement('tbody');
  data.slice(0,80).forEach((r,i)=>{
    const col=colors[i%colors.length];
    const gr=r.growth_rate>=0?'#4ade80':'#f87171';
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td><span class="rank-badge" style="background:${col}22;color:${col}">${r.rank}</span></td>
      <td style="font-weight:500">@${r.name}</td>
      <td><span style="font-size:14px">${COUNTRY_FLAGS[r.country]||'üåê'}</span> ${r.country}</td>
      <td>${r.followers.toFixed(1)}</td>
      <td>${r.avg_likes.toFixed(2)}</td>
      <td>${r.eng_rate.toFixed(3)}%</td>
      <td>
        <span style="font-family:'Syne',sans-serif;font-weight:700">${r.score}</span>
        <div class="score-bar" style="width:${r.score}%"></div>
      </td>
      <td style="color:${gr}">${r.growth_rate>=0?'+':''}${r.growth_rate.toFixed(1)}%</td>
    `;
    tbody.appendChild(tr);
  });
  t.appendChild(tbody);
}
function sortTable(col){
  if(tableSortCol===col) tableSortDir*=-1;
  else{tableSortCol=col;tableSortDir=1;}
  renderTable();
}
window.sortTable=sortTable;

// ‚îÄ‚îÄ SCATTER ‚îÄ‚îÄ
function updateScatter(data){
  const ctx=document.getElementById('scatterChart').getContext('2d');
  if(charts.scatter) charts.scatter.destroy();
  const display=data.slice(0,60);
  const datasets=display.map((r,i)=>({
    label:'@'+r.name,
    data:[{x:r.followers,y:r.avg_likes,r:Math.max(4,r.score/14)}],
    backgroundColor:PALETTE[i%PALETTE.length]+'88',
    borderColor:PALETTE[i%PALETTE.length],
    borderWidth:1.5,
  }));
  charts.scatter=new Chart(ctx,{
    type:'bubble',
    data:{datasets},
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{
          label:c=>`@${c.dataset.label.replace('@','')} | Followers: ${c.raw.x}M | Avg Likes: ${c.raw.y}M`
        }}
      },
      scales:{
        x:{title:{display:true,text:'Followers (M)',font:{size:11}},grid:{color:'rgba(255,255,255,0.05)'}},
        y:{title:{display:true,text:'Avg Likes (M)',font:{size:11}},grid:{color:'rgba(255,255,255,0.05)'}}
      }
    }
  });
}

// ‚îÄ‚îÄ LINE CHART ‚îÄ‚îÄ
const lineSelected=new Set([0,1,2]);
function buildLineControls(){
  const wrap=document.getElementById('trendControls');
  RAW.slice(0,10).forEach((r,i)=>{
    const btn=document.createElement('button');
    btn.className='trend-btn'+(lineSelected.has(i)?' active':'');
    btn.textContent='@'+r.name;
    btn.onclick=()=>{
      if(lineSelected.has(i)) lineSelected.delete(i);
      else lineSelected.add(i);
      btn.classList.toggle('active');
      buildLineChart();
    };
    wrap.appendChild(btn);
  });
  buildLineChart();
}
function buildLineChart(){
  const months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const ctx=document.getElementById('lineChart').getContext('2d');
  if(charts.line) charts.line.destroy();
  const datasets=[];
  lineSelected.forEach(i=>{
    const r=RAW[i];
    const base=r.new_post_avg_like;
    const seed=r.rank;
    const pts=months.map((_,m)=>+(base*(0.8+0.4*Math.sin((m+seed)*0.7+seed))).toFixed(2));
    const col=PALETTE[i%PALETTE.length];
    const g=ctx.createLinearGradient(0,0,0,220);
    g.addColorStop(0,col+'44');g.addColorStop(1,col+'00');
    datasets.push({
      label:'@'+r.name,data:pts,borderColor:col,backgroundColor:g,
      tension:0.4,fill:true,pointRadius:3,pointHoverRadius:7,
      borderWidth:2,pointBackgroundColor:col
    });
  });
  charts.line=new Chart(ctx,{
    type:'line',
    data:{labels:months,datasets},
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{legend:{labels:{color:'#7c7c99',font:{size:10},usePointStyle:true,pointStyle:'circle'}}},
      scales:{
        x:{grid:{color:'rgba(255,255,255,0.05)'}},
        y:{grid:{color:'rgba(255,255,255,0.05)'},ticks:{callback:v=>v+'M'}}
      }
    }
  });
}

// ‚îÄ‚îÄ COUNTRY BAR ‚îÄ‚îÄ
function updateCountryBar(){
  const top15=COUNTRIES_DATA.filter((v,i,a)=>a.findIndex(x=>x.country===v.country)===i).slice(0,15);
  const ctx=document.getElementById('countryBar').getContext('2d');
  if(charts.countryBar) charts.countryBar.destroy();
  const labels=top15.map(c=>(COUNTRY_FLAGS[c.country]||'')+'  '+c.country);
  const g1=ctx.createLinearGradient(0,0,ctx.canvas.width,0);
  g1.addColorStop(0,'rgba(64,93,230,.85)');g1.addColorStop(1,'rgba(131,58,180,.85)');
  const g2=ctx.createLinearGradient(0,0,ctx.canvas.width,0);
  g2.addColorStop(0,'rgba(225,48,108,.85)');g2.addColorStop(1,'rgba(247,119,55,.85)');
  charts.countryBar=new Chart(ctx,{
    type:'bar',
    data:{labels,datasets:[
      {label:'Influencer Count',data:top15.map(c=>c.count),backgroundColor:g1,borderRadius:5,yAxisID:'y'},
      {label:'Avg Score',data:top15.map(c=>c.avg_score),backgroundColor:g2,borderRadius:5,yAxisID:'y1'},
    ]},
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{legend:{labels:{color:'#7c7c99',font:{size:10},usePointStyle:true}}},
      scales:{
        x:{grid:{display:false},ticks:{font:{size:9}}},
        y:{grid:{color:'rgba(255,255,255,0.05)'},position:'left',title:{display:true,text:'Count',font:{size:10}}},
        y1:{grid:{display:false},position:'right',min:50,max:100,title:{display:true,text:'Avg Score',font:{size:10}}}
      }
    }
  });
}

// ‚îÄ‚îÄ BUBBLE CHART ‚îÄ‚îÄ
function buildBubbles(){
  const wrap=document.getElementById('bubbleArea');
  const uniq=COUNTRIES_DATA.filter((v,i,a)=>a.findIndex(x=>x.country===v.country)===i).slice(0,14);
  const maxF=Math.max(...uniq.map(c=>c.total_followers));
  uniq.forEach((c,i)=>{
    const size=30+Math.sqrt(c.total_followers/maxF)*90;
    const col=PALETTE[i%PALETTE.length];
    const b=document.createElement('div');
    b.className='bubble';
    b.style.cssText=`width:${size}px;height:${size}px;background:${col}33;border:2px solid ${col}88;`;
    b.innerHTML=`<div class="b-name">${COUNTRY_FLAGS[c.country]||'üåê'}<br>${c.country.length>8?c.country.slice(0,8)+'‚Ä¶':c.country}</div><div class="b-val">${c.avg_eng.toFixed(1)}%</div>`;
    b.title=`${c.country} | Avg Eng: ${c.avg_eng}% | Influencers: ${c.count}`;
    b.addEventListener('mousemove',e=>showTooltip(e,`<div class="tt-title">${COUNTRY_FLAGS[c.country]||'üåê'} ${c.country}</div><div class="tt-row">Influencers<span>${c.count}</span></div><div class="tt-row">Avg Score<span>${c.avg_score}</span></div><div class="tt-row">Avg Eng Rate<span>${c.avg_eng.toFixed(2)}%</span></div><div class="tt-row">Total Followers<span>${c.total_followers.toFixed(0)}M</span></div>`));
    b.addEventListener('mouseleave',hideTooltip);
    wrap.appendChild(b);
  });
}

// ‚îÄ‚îÄ MAP ‚îÄ‚îÄ
function buildMapGrid(){
  const grid=document.getElementById('mapGrid');
  const uniq=COUNTRIES_DATA.filter((v,i,a)=>a.findIndex(x=>x.country===v.country)===i);
  const maxE=Math.max(...uniq.map(c=>c.avg_eng));
  uniq.forEach(c=>{
    const norm=c.avg_eng/maxE;
    const card=document.createElement('div');
    card.className='map-card';
    const hue=Math.round(220-norm*180);
    const color=`hsl(${hue},90%,65%)`;
    card.innerHTML=`
      <div class="mbar" style="height:${norm*100}%;background:linear-gradient(135deg,#405DE6,#E1306C)"></div>
      <div class="mflag">${COUNTRY_FLAGS[c.country]||'üåê'}</div>
      <div class="mname">${c.country}</div>
      <div class="mval" style="color:${color}">${c.avg_eng.toFixed(2)}%</div>
      <div class="mcnt">${c.count} influencers</div>
    `;
    card.addEventListener('mousemove',e=>showTooltip(e,`<div class="tt-title">${COUNTRY_FLAGS[c.country]||'üåê'} ${c.country}</div><div class="tt-row">Influencers<span>${c.count}</span></div><div class="tt-row">Avg Score<span>${c.avg_score}</span></div><div class="tt-row">Avg Eng Rate<span>${c.avg_eng.toFixed(3)}%</span></div><div class="tt-row">Total Followers<span>${c.total_followers.toFixed(0)}M</span></div><div class="tt-row">Total Likes<span>${(c.total_likes_m/1e6).toFixed(1)}T</span></div>`));
    card.addEventListener('mouseleave',hideTooltip);
    grid.appendChild(card);
  });
}

// ‚îÄ‚îÄ HEATMAP ‚îÄ‚îÄ
function buildHeatmap(){
  const wrap=document.getElementById('heatmapWrap');
  const top10inf=RAW.slice(0,10);
  const top10cnt=['United States','India','Brazil','South Korea','Spain','United Kingdom','Indonesia','France','Canada','Colombia'];
  const cols=top10cnt.length;
  const grid=document.createElement('div');
  grid.className='hm-grid';
  grid.style.gridTemplateColumns=`70px repeat(${cols},1fr)`;
  // header
  const blank=document.createElement('div');blank.className='hm-label';grid.appendChild(blank);
  top10cnt.forEach(c=>{
    const h=document.createElement('div');
    h.className='hm-label';
    h.style.cssText='font-size:8px;justify-content:center;text-align:center;';
    h.textContent=(COUNTRY_FLAGS[c]||'')+''+c.slice(0,4);
    grid.appendChild(h);
  });
  top10inf.forEach(inf=>{
    const lbl=document.createElement('div');
    lbl.className='hm-label';lbl.style.fontSize='9px';
    lbl.textContent='@'+inf.name.slice(0,8);
    grid.appendChild(lbl);
    top10cnt.forEach(cnt=>{
      // Use real eng60 value for the influencer, vary slightly by country
      const base=inf.eng60;
      const countryMult={'South Korea':3.5,'India':1.4,'United States':0.9,'Brazil':0.7,'Spain':1.0,'United Kingdom':1.1,'Indonesia':0.6,'France':0.8,'Canada':1.2,'Colombia':1.0};
      const val=Math.min(0.5,base*(countryMult[cnt]||1)*(0.8+Math.random()*0.4));
      const pct=Math.min(1,val/0.15);
      const r=Math.round(64+pct*161);
      const g2=Math.round(93-pct*45);
      const b2=Math.round(230-pct*150);
      const cell=document.createElement('div');
      cell.className='hm-cell';
      cell.style.cssText=`background:rgba(${r},${g2},${b2},${0.2+pct*0.75});color:rgba(255,255,255,${0.5+pct*0.5})`;
      cell.textContent=(val*100).toFixed(1)+'%';
      cell.title=`@${inf.name} √ó ${cnt}: ${(val*100).toFixed(2)}%`;
      cell.addEventListener('mousemove',e=>showTooltip(e,`<div class="tt-title">@${inf.name}</div><div class="tt-row">Country<span>${cnt}</span></div><div class="tt-row">60-day Eng<span>${(val*100).toFixed(2)}%</span></div><div class="tt-row">Influence Score<span>${inf.score}</span></div>`));
      cell.addEventListener('mouseleave',hideTooltip);
      grid.appendChild(cell);
    });
  });
  wrap.appendChild(grid);
}

// ‚îÄ‚îÄ TRENDLINE ‚îÄ‚îÄ
function updateTrendChart(data){
  const months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const bands=[
    {label:'Score 90+',filter:r=>r.score>=90,col:'#E1306C'},
    {label:'Score 80‚Äì89',filter:r=>r.score>=80&&r.score<90,col:'#833AB4'},
    {label:'Score <80',filter:r=>r.score<80,col:'#405DE6'},
  ];
  const ctx=document.getElementById('trendChart').getContext('2d');
  if(charts.trend) charts.trend.destroy();
  const datasets=bands.map((b,bi)=>{
    const grp=data.filter(b.filter);
    const avgE=grp.length?grp.reduce((a,r)=>a+r.eng_rate,0)/grp.length:0;
    const pts=months.map((_,m)=>+(avgE*(0.85+0.3*Math.sin(m*0.6+bi*1.5))).toFixed(3));
    const g=ctx.createLinearGradient(0,0,0,280);
    g.addColorStop(0,b.col+'33');g.addColorStop(1,b.col+'00');
    return{label:b.label+' ('+grp.length+')',data:pts,borderColor:b.col,backgroundColor:g,tension:0.45,fill:bi===0,pointRadius:3,pointHoverRadius:7,borderWidth:2.5};
  });
  charts.trend=new Chart(ctx,{
    type:'line',
    data:{labels:months,datasets},
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{legend:{labels:{color:'#7c7c99',font:{size:10},usePointStyle:true,pointStyle:'circle'}}},
      scales:{
        x:{grid:{color:'rgba(255,255,255,0.05)'}},
        y:{grid:{color:'rgba(255,255,255,0.05)'},ticks:{callback:v=>v+'%'}}
      }
    }
  });
}

// ‚îÄ‚îÄ GROWTH CHART ‚îÄ‚îÄ
function updateGrowthChart(){
  const data=filtered().slice(0,state.topN);
  const labels=data.map(r=>'@'+r.name);
  const vals=data.map(r=>r.growth_rate);
  const colors=vals.map(v=>v>=0?'rgba(74,222,128,0.85)':'rgba(225,48,108,0.85)');
  const ctx=document.getElementById('growthChart').getContext('2d');
  if(charts.growth) charts.growth.destroy();
  charts.growth=new Chart(ctx,{
    type:'bar',
    data:{labels,datasets:[{data:vals,backgroundColor:colors,borderRadius:6,borderSkipped:false}]},
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{callbacks:{label:c=>` Growth: ${c.raw.toFixed(2)}%`}}
      },
      scales:{
        x:{grid:{display:false},ticks:{font:{size:10}}},
        y:{grid:{color:'rgba(255,255,255,0.05)'},ticks:{callback:v=>v+'%'}}
      }
    }
  });
}

// ‚îÄ‚îÄ TOOLTIP ‚îÄ‚îÄ
const ttEl=document.getElementById('tooltip');
function showTooltip(e,html){
  ttEl.innerHTML=html;
  ttEl.style.display='block';
  const pad=12;
  let x=e.clientX+pad,y=e.clientY+pad;
  if(x+240>window.innerWidth) x=e.clientX-240-pad;
  if(y+150>window.innerHeight) y=e.clientY-150-pad;
  ttEl.style.left=x+'px';
  ttEl.style.top=y+'px';
}
function hideTooltip(){ttEl.style.display='none';}
document.addEventListener('mousemove',e=>{
  if(ttEl.style.display!=='none'){
    const pad=12;
    let x=e.clientX+pad,y=e.clientY+pad;
    if(x+240>window.innerWidth) x=e.clientX-240-pad;
    if(y+150>window.innerHeight) y=e.clientY-150-pad;
    ttEl.style.left=x+'px'; ttEl.style.top=y+'px';
  }
});

init();
</script>
</body>
</html>

</body>
</html>